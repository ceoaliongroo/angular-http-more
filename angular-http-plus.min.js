"use strict";angular.module("cm.angularHttpPlus",[]).service("Restful",["$q","$http","$timeout","$rootScope",function(a,b,c,d){function e(){var c=a.defer();return b({method:"GET",url:k.url,transformResponse:k.transformResponse}).success(function(a){f(a),c.resolve(a)}),c.promise}function f(a){j={data:a},h=c(function(){j={}},6e4),d.$broadcast("restfulChanged")}function g(){return angular.copy(j.data)}var h,i,j={},k={};this.setConfig=function(a){angular.isUndefined(a)||angular.extend(k,a)},this.get=function(){return Object.keys(k).length?(i=a.when(i||g()||e()),i["finally"](function(){i=void 0}),i):a.reject(new Error("Configuration not defined."))},d.$on("clearCache",function(){angular.isDefined(j.data)&&h.cancel(),j={},i=undefiend})}]);